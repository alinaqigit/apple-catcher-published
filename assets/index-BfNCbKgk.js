var e=Object.defineProperty,t=(t,s,i)=>((t,s,i)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i)(t,"symbol"!=typeof s?s+"":s,i);import{r as s,g as i}from"./phaser-CLYd3JIB.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const r=i(s()),o=500;class a extends r.Scene{constructor(){super("scene-game"),t(this,"player"),t(this,"target"),t(this,"cursor"),t(this,"textScore"),t(this,"textTime"),t(this,"timeEvent"),t(this,"remainingTime"),t(this,"points",0),t(this,"playerSpeed",200),t(this,"coinSound"),t(this,"bgSound"),t(this,"emmitter")}preload(){this.load.image("basket","/assets/basket.png"),this.load.image("bg","/assets/bg.png"),this.load.image("apple","/assets/apple.png"),this.load.image("money","/assets/money.png"),this.load.audio("bgMusic","/assets/bgMusic.mp3"),this.load.audio("coin","/assets/coin.mp3")}create(){this.scene.pause("scene-game"),this.add.image(0,0,"bg").setOrigin(0,0),this.player=this.physics.add.image(0,400,"basket").setOrigin(0,0),this.player.body.setImmovable(!0),this.player.body.setAllowGravity(!1),this.player.body.setCollideWorldBounds(!0),this.player.setSize(.75*this.player.width,this.player.height/6).setOffset(this.player.width/10,.9*this.player.height),this.target=this.physics.add.image(0,0,"apple").setOrigin(0,0),this.target.setMaxVelocity(0,150),this.target.body.setCollideWorldBounds(!0),this.textScore=this.add.text(380,10,"Score: 0",{font:"25px Arial",color:"#000000"}),this.textTime=this.add.text(30,10,"Remaining Time: 0",{font:"25px Arial",color:"#000000"}),this.timeEvent=this.time.delayedCall(3e4,this.gameOver,[],this),this.coinSound=this.sound.add("coin"),this.bgSound=this.sound.add("bgMusic"),this.physics.add.overlap(this.player,this.target,this.targetHit,void 0,this),this.cursor=this.input.keyboard.createCursorKeys(),this.bgSound.play(),this.emmitter=this.add.particles(0,0,"money",{speed:100,gravityY:-50,scale:.04,duration:100,emitting:!1}),this.emmitter.startFollow(this.player,this.player.width/2,this.player.height/2,!0)}update(){this.remainingTime=this.timeEvent.getRemainingSeconds(),this.textTime.setText(`Remaining time: ${Math.floor(this.remainingTime)}`);const{left:e,right:t}=this.cursor;e.isDown?this.player.setVelocityX(-this.playerSpeed):t.isDown?this.player.setVelocityX(this.playerSpeed):this.player.setVelocityX(0),this.target.y>=450&&(this.target.setY(0),this.target.setX(Math.floor(Math.random()*o)))}targetHit(){this.emmitter.start(),this.coinSound.play(),this.target.setY(0),this.target.setX(Math.floor(Math.random()*o)),this.points++,this.textScore.setText(`Score: ${this.points}`)}gameOver(){this.events.emit("game-over",{result:{win:this.points>0,score:this.points}}),this.sys.game.destroy(!0)}}const n={type:r.WEBGL,width:o,height:500,physics:{default:"arcade",arcade:{gravity:{y:150,x:0},debug:!0}},scene:[a]};let h;document.addEventListener("DOMContentLoaded",(()=>{h=document.getElementById("gameCanvas");const e=document.querySelector("#gameStartDiv"),t=document.querySelector("#gameStartBtn"),s=document.querySelector("#gameEndDiv"),i=document.querySelector("#gameWinLoseSpan"),o=document.querySelector("#gameEndScoreSpan");if(!h)throw new Error("Canvas not found");if(!(h instanceof HTMLCanvasElement))throw new Error("The element is not canvas");let a=(l=h,new r.Game({...n,canvas:l}));var l;a.events.on("ready",(()=>{a.scene.getScene("scene-game").events.on("game-over",(({result:e})=>{console.log(s),s.style.display="flex",o.textContent=e.score.toString(),e.score>=10?i.textContent="Win! 😍":o.textContent="Lose! 👎"}))})),t.addEventListener("click",(()=>{e.style.display="none",a.scene.resume("scene-game")}))}));
